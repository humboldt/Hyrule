$(document).on('turbolinks:load', function() {
//Function for Slider : change image background on top of page banner
  var slideshow = $('.slideshow');
  if ( slideshow && slideshow.data("images") ) {
    //the data-images is an array of all image_url for this page
    //is given specific image for specific theme
    var urls= slideshow.data("images");
  } else {
    //if none its generic slider image
    //those are default generic image for homepage slider
    var urls = [
      "<%= asset_url("main001.jpg") %>", "<%= asset_url("main002.jpg") %>",
      "<%= asset_url("main003.jpg") %>", "<%= asset_url("main004.jpg") %>",
      "<%= asset_url("main005.jpg") %>", "<%= asset_url("main006.jpg") %>",
      "<%= asset_url("main007.jpg") %>", "<%= asset_url("main008.jpg") %>",
      "<%= asset_url("main009.jpg") %>", "<%= asset_url("main010.jpg") %>",
      "<%= asset_url("main011.jpg") %>", "<%= asset_url("main012.jpg") %>",
      "<%= asset_url("main013.jpg") %>", "<%= asset_url("main014.jpg") %>",
      "<%= asset_url("main015.jpg") %>", "<%= asset_url("main016.jpg") %>",
      "<%= asset_url("main017.jpg") %>", "<%= asset_url("main018.jpg") %>",
      "<%= asset_url("main019.jpg") %>", "<%= asset_url("main020.jpg") %>",
      "<%= asset_url("main021.jpg") %>", "<%= asset_url("main022.jpg") %>",
      "<%= asset_url("main023.jpg") %>", "<%= asset_url("main024.jpg") %>",
      "<%= asset_url("main025.jpg") %>", "<%= asset_url("main026.jpg") %>",
      "<%= asset_url("main027.jpg") %>"
    ];
  };

  var introSlide = function() {
    index = Math.floor((Math.random() * urls.length));
    var url = urls[index];
    var nextImage = new Image;
    nextImage.onload = function() { //change background when image is loaded
      console.log(this.src);
      slideshow.css('background', "url(" + this.src + ")" );
      slideshow.css('position', 'absolute' );
      slideshow.css('background-size', 'cover' );
      slideshow.css('background-position', 'center center' );
      slideshow.css('background-repeat', 'no-repeat' );
      slideshow.fadeIn(1000, function() {
        setTimeout(function() { //change background again after few second
          slideshow.fadeOut(3000, introSlide);
        }, 6000);
      });
    };

    nextImage.src = url; //start load image
  }
  introSlide();

}); //$ready function ending
